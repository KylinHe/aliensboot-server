// Code generated by aliensboot. DO NOT EDIT.
// source: room_interface.proto
package service

import (
	"github.com/KylinHe/aliensboot-server/constant"
	"github.com/KylinHe/aliensboot-server/module/room/core"
	"github.com/KylinHe/aliensboot-server/protocol"
)

//
func handleRoomCreate(authID int64, gateID string, request *protocol.RoomCreate, response *protocol.RoomCreateRet) {
	if authID > 0 {
		room := core.RoomManager.CreateRoomByPlayer(request.GetAppID(), authID, request.GetRoomID(), request.GetForce())
		response.Room = room.BuildProtocol()
	} else if request.GetPlayerID() != nil {
		//系统创建的房间需要通知玩家
		room := core.RoomManager.CreateRoom(request.GetAppID(), request.GetRoomID(), request.GetForce(), request.GetPlayerID())
		response.Room = room.BuildProtocol()

		push := &protocol.Response{Room: &protocol.Response_RoomCreateRet{
				RoomCreateRet:response,
			},
		}
		room.BroadcastOtherPlayer(-1, constant.RoleAll, push)
	}

}
